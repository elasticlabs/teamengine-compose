version: '3'

services:
  #
  # Applications
  teamengine:
    build: ./teamengine
    container_name: teamengine@${COMPOSE_PROJECT_NAME}
    restart: unless-stopped
    expose: 
      - "8081"
    environment: 
      - VIRTUAL_HOST=teamengine.elasticlabs.co
      - VIRTUAL_PORT=8081
      - TE_BASE=${TE_INSTALLDIR}
      - TE_VERSION=${TE_VERSION}
    env_file:
      - ./teamengine/.env
    volumes:
      - te-base:${TE_BASE}
      - te-java-scripts:${TE_BASE}/resources/lib
      - te-ctl-scripts:${TE_BASE}/scripts
    #  - ./ets-data:/root/ets-data
    networks:
      - apps

volumes:
  te-base:
  te-java-scripts:
  te-ctl-scripts:

networks:
  apps: